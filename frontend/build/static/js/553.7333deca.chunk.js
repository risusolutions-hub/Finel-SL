/*! For license information please see 553.7333deca.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkrole_based_frontend=self.webpackChunkrole_based_frontend||[]).push([[553],{553(e,s,t){t.r(s),t.d(s,{default:()=>x});var a=t(5043),l=t(7819),c=t(6401),i=t(8646);const r=(0,t(5228).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var n=t(349),d=t(579);function x(e){let{machineId:s}=e;const[t,x]=(0,a.useState)([]),[o,m]=(0,a.useState)([]),[h,p]=(0,a.useState)(!0),[j,v]=(0,a.useState)("all");(0,a.useEffect)(()=>{b()},[s]);const b=async()=>{try{p(!0);const e=await fetch("/api/service-history/machines/".concat(s),{credentials:"include"}),t=await e.json();t.success&&(x(t.history||[]),m(t.frequentFailures||[]))}catch(e){console.error("Error loading service history:",e)}finally{p(!1)}},u="all"===j?t:t.filter(e=>e.serviceType===j);return h?(0,d.jsx)(n.A,{}):(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("div",{className:"flex items-center justify-between pb-4 border-b border-slate-200",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Service History Timeline"}),(0,d.jsx)("p",{className:"text-sm text-slate-500",children:"Complete service record for this machine"})]})}),o.length>0&&(0,d.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsx)(l.A,{className:"text-red-600 flex-shrink-0 mt-1",size:20}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-bold text-red-900",children:"Frequent Failures Detected"}),(0,d.jsx)("p",{className:"text-sm text-red-700 mt-1",children:"These components have failed multiple times:"}),(0,d.jsx)("ul",{className:"list-disc list-inside text-sm text-red-700 mt-2",children:o.map((e,s)=>(0,d.jsxs)("li",{children:[e.partName," (",e.failureCount," times)"]},s))})]})]})}),(0,d.jsx)("div",{className:"flex gap-2 flex-wrap",children:["all","corrective","preventive","maintenance","inspection"].map(e=>(0,d.jsx)("button",{onClick:()=>v(e),className:"px-4 py-2 rounded-lg font-medium transition ".concat(j===e?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,d.jsx)("div",{className:"relative",children:0===u.length?(0,d.jsxs)("div",{className:"text-center py-12 text-slate-400",children:[(0,d.jsx)(c.A,{size:40,className:"mx-auto mb-3 opacity-50"}),(0,d.jsx)("p",{children:"No service history for this machine"})]}):(0,d.jsx)("div",{className:"space-y-6",children:u.map((e,s)=>(0,d.jsxs)("div",{className:"flex gap-4",children:[(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm ".concat("corrective"===e.serviceType?"bg-red-500":"preventive"===e.serviceType?"bg-green-500":"maintenance"===e.serviceType?"bg-blue-500":"bg-purple-500"),children:s+1}),s<u.length-1&&(0,d.jsx)("div",{className:"w-1 h-16 bg-slate-300 mt-2"})]}),(0,d.jsx)("div",{className:"flex-1 pb-4",children:(0,d.jsxs)("div",{className:"bg-white border border-slate-200 rounded-lg p-4 hover:shadow-md transition",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("h3",{className:"font-bold text-slate-900 capitalize",children:[e.serviceType," Service"]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-sm text-slate-500",children:[(0,d.jsx)(i.A,{size:14}),new Date(e.serviceDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})]}),(0,d.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold ".concat("corrective"===e.serviceType?"bg-red-100 text-red-700":"preventive"===e.serviceType?"bg-green-100 text-green-700":"maintenance"===e.serviceType?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"),children:e.serviceType})]}),e.issueDescription&&(0,d.jsxs)("div",{className:"mb-3",children:[(0,d.jsx)("p",{className:"text-xs font-bold text-slate-600 uppercase",children:"Issue"}),(0,d.jsx)("p",{className:"text-sm text-slate-700",children:e.issueDescription})]}),e.resolutionDescription&&(0,d.jsxs)("div",{className:"mb-3",children:[(0,d.jsx)("p",{className:"text-xs font-bold text-slate-600 uppercase",children:"Resolution"}),(0,d.jsx)("p",{className:"text-sm text-slate-700",children:e.resolutionDescription})]}),e.partsReplaced&&e.partsReplaced.length>0&&(0,d.jsxs)("div",{className:"mb-3",children:[(0,d.jsx)("p",{className:"text-xs font-bold text-slate-600 uppercase mb-2",children:"Parts Replaced"}),(0,d.jsx)("div",{className:"grid grid-cols-2 gap-2",children:e.partsReplaced.map((e,s)=>(0,d.jsxs)("div",{className:"bg-slate-50 rounded p-2 text-sm",children:[(0,d.jsx)("p",{className:"font-medium text-slate-900",children:e.partName}),(0,d.jsxs)("p",{className:"text-xs text-slate-600",children:["Qty: ",e.quantity]}),e.cost&&(0,d.jsxs)("p",{className:"text-xs text-slate-600 flex items-center gap-1 mt-1",children:[(0,d.jsx)(r,{size:12})," ",e.cost]})]},s))})]}),(0,d.jsxs)("div",{className:"grid grid-cols-3 gap-2 pt-3 border-t border-slate-200",children:[e.downtime&&(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs text-slate-500",children:"Downtime"}),(0,d.jsxs)("p",{className:"font-bold text-slate-900",children:[e.downtime,"m"]})]}),e.cost&&(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs text-slate-500",children:"Cost"}),(0,d.jsxs)("p",{className:"font-bold text-slate-900",children:["$",e.cost]})]}),e.engineer&&(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs text-slate-500",children:"Engineer"}),(0,d.jsx)("p",{className:"font-bold text-slate-900 text-sm",children:e.engineer.name})]})]}),e.nextScheduledMaintenance&&(0,d.jsx)("div",{className:"mt-3 p-2 bg-blue-50 rounded border border-blue-200",children:(0,d.jsxs)("p",{className:"text-xs text-blue-700",children:[(0,d.jsx)("strong",{children:"Next Maintenance:"})," ",new Date(e.nextScheduledMaintenance).toLocaleDateString()]})})]})})]},e.id||e._id||"srv-".concat(s)))})})]})}},6401(e,s,t){t.d(s,{A:()=>a});const a=(0,t(5228).A)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]])},8646(e,s,t){t.d(s,{A:()=>a});const a=(0,t(5228).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])}}]);
//# sourceMappingURL=553.7333deca.chunk.js.map