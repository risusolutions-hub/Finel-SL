/*! For license information please see 256.2c433653.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkrole_based_frontend=self.webpackChunkrole_based_frontend||[]).push([[256],{2489(e,s,t){t.d(s,{A:()=>l});const l=(0,t(5228).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},3256(e,s,t){t.r(s),t.d(s,{default:()=>h});var l=t(9379),a=t(5043),i=t(7819),r=t(2054),n=t(9989),c=t(5347),d=t(5088),o=t(1360),x=t(2489),m=t(3944),u=t(9855),p=t(4919),g=t(674),b=t(579);function h(e){let{currentUser:s}=e;const[t,h]=(0,a.useState)([]),[f,v]=(0,a.useState)(null),[N,y]=(0,a.useState)([]),[j,A]=(0,a.useState)([]),[k,w]=(0,a.useState)(!0),[C,S]=(0,a.useState)(!1),[E,z]=(0,a.useState)(!1),[L,D]=(0,a.useState)(null),[O,B]=(0,a.useState)(null),[I,M]=(0,a.useState)({skillName:"",skillCategory:"mechanical",proficiencyLevel:"intermediate",yearsOfExperience:1}),[_,q]=(0,a.useState)({certificationName:"",issuingBody:"",certificateNumber:"",issuedAt:"",expiresAt:""}),U=[{value:"mechanical",label:"Mechanical",icon:"\u2699\ufe0f"},{value:"electrical",label:"Electrical",icon:"\u26a1"},{value:"network",label:"Network",icon:"\ud83c\udf10"},{value:"software",label:"Software",icon:"\ud83d\udcbb"},{value:"laser",label:"Laser Systems",icon:"\ud83d\udd34"},{value:"optics",label:"Optics",icon:"\ud83d\udd2c"},{value:"safety",label:"Safety",icon:"\ud83d\udee1\ufe0f"},{value:"other",label:"Other",icon:"\ud83d\udccb"}],V=[{value:"beginner",label:"Beginner",color:"bg-slate-100 text-slate-700"},{value:"intermediate",label:"Intermediate",color:"bg-blue-100 text-blue-700"},{value:"advanced",label:"Advanced",color:"bg-green-100 text-green-700"},{value:"expert",label:"Expert",color:"bg-purple-100 text-purple-700"}];(0,a.useEffect)(()=>{P()},[]),(0,a.useEffect)(()=>{f&&T(f.id)},[f]);const P=async()=>{try{const e=((await g.A.get("/users")).data.users||[]).filter(e=>"engineer"===e.role);if(h(e),"engineer"===(null===s||void 0===s?void 0:s.role)){const t=e.find(e=>e.id===s.id);t&&v(t)}else e.length>0&&v(e[0])}catch(e){console.error("Error loading engineers:",e)}},T=async e=>{try{w(!0);const[s,t]=await Promise.all([g.A.get("/skills/engineers/".concat(e,"/skills")),g.A.get("/skills/engineers/".concat(e,"/certifications"))]);y(s.data.skills||[]),A(t.data.certifications||[])}catch(s){console.error("Error loading skills:",s)}finally{w(!1)}},Y=e=>{var s;return(null===(s=V.find(s=>s.value===e))||void 0===s?void 0:s.color)||"bg-slate-100 text-slate-700"},F=e=>{var s;return(null===(s=U.find(s=>s.value===e))||void 0===s?void 0:s.icon)||"\ud83d\udccb"},G=e=>{if(!e)return!1;const s=new Date(e),t=new Date;return s-t<2592e6&&s>t},H=e=>!!e&&new Date(e)<new Date,J=j.filter(e=>G(e.expiresAt)),K=j.filter(e=>H(e.expiresAt)),Q="engineer"!==(null===s||void 0===s?void 0:s.role)||(null===f||void 0===f?void 0:f.id)===(null===s||void 0===s?void 0:s.id);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between pb-4 border-b border-slate-200",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[(0,b.jsx)(c.A,{size:24,className:"text-blue-600"}),"Skills & Certifications"]}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Manage engineer qualifications and expertise"})]})}),"engineer"!==(null===s||void 0===s?void 0:s.role)&&(0,b.jsx)("div",{className:"flex gap-3 flex-wrap",children:t.map(e=>{var s;return(0,b.jsxs)("button",{onClick:()=>v(e),className:"px-4 py-2 rounded-lg flex items-center gap-2 transition ".concat((null===f||void 0===f?void 0:f.id)===e.id?"bg-blue-600 text-white":"bg-white border border-slate-200 text-slate-700 hover:border-blue-300"),children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ".concat((null===f||void 0===f?void 0:f.id)===e.id?"bg-blue-500":"bg-slate-200"),children:null===(s=e.name)||void 0===s?void 0:s.charAt(0).toUpperCase()}),(0,b.jsx)("span",{className:"font-medium",children:e.name})]},e.id)})}),f&&(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between bg-slate-50",children:[(0,b.jsxs)("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[(0,b.jsx)(m.A,{size:18,className:"text-yellow-500"}),"Technical Skills"]}),Q&&(0,b.jsxs)("button",{onClick:()=>S(!0),className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition flex items-center gap-1",children:[(0,b.jsx)(o.A,{size:16})," Add Skill"]})]}),(C||L)&&(0,b.jsxs)("form",{onSubmit:L?async e=>{e.preventDefault();try{const e=await g.A.put("/skills/skills/".concat(L.id),I);y(N.map(s=>s.id===L.id?e.data.skill:s)),D(null),M({skillName:"",skillCategory:"mechanical",proficiencyLevel:"intermediate",yearsOfExperience:1})}catch(s){console.error("Error updating skill:",s)}}:async e=>{e.preventDefault();try{const e=await g.A.post("/skills/skills",(0,l.A)({engineerId:f.id},I));y([...N,e.data.skill]),M({skillName:"",skillCategory:"mechanical",proficiencyLevel:"intermediate",yearsOfExperience:1}),S(!1)}catch(s){console.error("Error adding skill:",s)}},className:"p-4 border-b border-slate-200 bg-blue-50",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)("input",{type:"text",placeholder:"Skill name",value:I.skillName,onChange:e=>M((0,l.A)((0,l.A)({},I),{},{skillName:e.target.value})),className:"col-span-2 px-3 py-2 border border-slate-300 rounded-lg text-sm",required:!0}),(0,b.jsx)("select",{value:I.skillCategory,onChange:e=>M((0,l.A)((0,l.A)({},I),{},{skillCategory:e.target.value})),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm",children:U.map(e=>(0,b.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value))}),(0,b.jsx)("select",{value:I.proficiencyLevel,onChange:e=>M((0,l.A)((0,l.A)({},I),{},{proficiencyLevel:e.target.value})),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm",children:V.map(e=>(0,b.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,b.jsxs)("div",{className:"col-span-2 flex items-center gap-2",children:[(0,b.jsx)("label",{className:"text-sm text-slate-600",children:"Years of Experience:"}),(0,b.jsx)("input",{type:"number",min:"0",max:"50",value:I.yearsOfExperience,onChange:e=>M((0,l.A)((0,l.A)({},I),{},{yearsOfExperience:parseInt(e.target.value)})),className:"w-20 px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,b.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",children:[L?"Update":"Add"," Skill"]}),(0,b.jsx)("button",{type:"button",onClick:()=>{S(!1),D(null)},className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg text-sm font-medium hover:bg-slate-300",children:"Cancel"})]})]}),(0,b.jsx)("div",{className:"p-4 space-y-3 max-h-96 overflow-y-auto",children:k?(0,b.jsx)("div",{className:"text-center py-8 text-slate-400",children:"Loading..."}):0===N.length?(0,b.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,b.jsx)(m.A,{size:32,className:"mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{children:"No skills recorded"})]}):N.map(e=>(0,b.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-lg",children:F(e.skillCategory)}),(0,b.jsx)("span",{className:"font-medium text-slate-900",children:e.skillName}),(0,b.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat(Y(e.proficiencyLevel)),children:e.proficiencyLevel})]}),(0,b.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[e.yearsOfExperience," years experience \u2022 ",e.skillCategory]})]}),Q&&(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)("button",{onClick:()=>(e=>{D(e),M({skillName:e.skillName,skillCategory:e.skillCategory||"mechanical",proficiencyLevel:e.proficiencyLevel,yearsOfExperience:e.yearsOfExperience})})(e),className:"p-1.5 hover:bg-slate-200 rounded transition",children:(0,b.jsx)(n.A,{size:14,className:"text-slate-500"})}),(0,b.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Delete this skill?"))try{await g.A.delete("/skills/skills/".concat(e)),y(N.filter(s=>s.id!==e))}catch(s){console.error("Error deleting skill:",s)}})(e.id),className:"p-1.5 hover:bg-red-100 rounded transition",children:(0,b.jsx)(u.A,{size:14,className:"text-red-500"})})]})]},e.id))})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between bg-slate-50",children:[(0,b.jsxs)("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[(0,b.jsx)(x.A,{size:18,className:"text-green-500"}),"Certifications"]}),Q&&(0,b.jsxs)("button",{onClick:()=>z(!0),className:"px-3 py-1.5 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition flex items-center gap-1",children:[(0,b.jsx)(o.A,{size:16})," Add Cert"]})]}),(J.length>0||K.length>0)&&(0,b.jsxs)("div",{className:"p-3 space-y-2 border-b border-slate-200",children:[K.length>0&&(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-start gap-2",children:[(0,b.jsx)(i.A,{size:16,className:"text-red-600 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-bold text-red-900",children:["Expired (",K.length,")"]}),(0,b.jsx)("p",{className:"text-xs text-red-700",children:K.map(e=>e.certificationName).join(", ")})]})]}),J.length>0&&(0,b.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex items-start gap-2",children:[(0,b.jsx)(d.A,{size:16,className:"text-yellow-600 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-bold text-yellow-900",children:["Expiring Soon (",J.length,")"]}),(0,b.jsx)("p",{className:"text-xs text-yellow-700",children:J.map(e=>e.certificationName).join(", ")})]})]})]}),E&&(0,b.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await g.A.post("/skills/certifications",(0,l.A)({engineerId:f.id},_));A([...j,e.data.certification]),q({certificationName:"",issuingBody:"",certificateNumber:"",issuedAt:"",expiresAt:""}),z(!1)}catch(s){console.error("Error adding certification:",s)}},className:"p-4 border-b border-slate-200 bg-green-50",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)("input",{type:"text",placeholder:"Certification name",value:_.certificationName,onChange:e=>q((0,l.A)((0,l.A)({},_),{},{certificationName:e.target.value})),className:"col-span-2 px-3 py-2 border border-slate-300 rounded-lg text-sm",required:!0}),(0,b.jsx)("input",{type:"text",placeholder:"Issuing body",value:_.issuingBody,onChange:e=>q((0,l.A)((0,l.A)({},_),{},{issuingBody:e.target.value})),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm"}),(0,b.jsx)("input",{type:"text",placeholder:"Certificate number",value:_.certificateNumber,onChange:e=>q((0,l.A)((0,l.A)({},_),{},{certificateNumber:e.target.value})),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-slate-500",children:"Issue Date"}),(0,b.jsx)("input",{type:"date",value:_.issuedAt,onChange:e=>q((0,l.A)((0,l.A)({},_),{},{issuedAt:e.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-slate-500",children:"Expiry Date"}),(0,b.jsx)("input",{type:"date",value:_.expiresAt,onChange:e=>q((0,l.A)((0,l.A)({},_),{},{expiresAt:e.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,b.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700",children:"Add Certification"}),(0,b.jsx)("button",{type:"button",onClick:()=>z(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg text-sm font-medium hover:bg-slate-300",children:"Cancel"})]})]}),(0,b.jsx)("div",{className:"p-4 space-y-3 max-h-96 overflow-y-auto",children:k?(0,b.jsx)("div",{className:"text-center py-8 text-slate-400",children:"Loading..."}):0===j.length?(0,b.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,b.jsx)(x.A,{size:32,className:"mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{children:"No certifications recorded"})]}):j.map(e=>(0,b.jsxs)("div",{className:"p-3 rounded-lg flex items-start justify-between ".concat(H(e.expiresAt)?"bg-red-50 border border-red-200":G(e.expiresAt)?"bg-yellow-50 border border-yellow-200":"bg-slate-50"),children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(c.A,{size:16,className:H(e.expiresAt)?"text-red-500":G(e.expiresAt)?"text-yellow-500":"text-green-500"}),(0,b.jsx)("span",{className:"font-medium text-slate-900",children:e.certificationName}),e.isVerified&&(0,b.jsx)(r.A,{size:14,className:"text-green-500"})]}),(0,b.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[e.issuingBody&&"".concat(e.issuingBody," \u2022 "),e.certificateNumber&&"#".concat(e.certificateNumber)]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-xs",children:[e.issuedAt&&(0,b.jsxs)("span",{className:"text-slate-500",children:["Issued: ",new Date(e.issuedAt).toLocaleDateString()]}),e.expiresAt&&(0,b.jsxs)("span",{className:H(e.expiresAt)?"text-red-600 font-bold":G(e.expiresAt)?"text-yellow-600 font-bold":"text-slate-500",children:[H(e.expiresAt)?"Expired":"Expires",": ",new Date(e.expiresAt).toLocaleDateString()]})]})]}),Q&&(0,b.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Delete this certification?"))try{await g.A.delete("/skills/certifications/".concat(e)),A(j.filter(s=>s.id!==e))}catch(s){console.error("Error deleting certification:",s)}})(e.id),className:"p-1.5 hover:bg-red-100 rounded transition",children:(0,b.jsx)(u.A,{size:14,className:"text-red-500"})})]},e.id))})]})]}),N.length>0&&(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[(0,b.jsxs)("h3",{className:"font-bold text-slate-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)(p.A,{size:18,className:"text-blue-600"}),"Skills Summary"]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:U.map(e=>{const s=N.filter(s=>s.skillCategory===e.value);return 0===s.length?null:(0,b.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("span",{className:"text-xl",children:e.icon}),(0,b.jsx)("span",{className:"font-medium text-slate-900",children:e.label})]}),(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:s.length}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"skills"})]},e.value)})})]})]})}},3944(e,s,t){t.d(s,{A:()=>l});const l=(0,t(5228).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},4919(e,s,t){t.d(s,{A:()=>l});const l=(0,t(5228).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])}}]);
//# sourceMappingURL=256.2c433653.chunk.js.map