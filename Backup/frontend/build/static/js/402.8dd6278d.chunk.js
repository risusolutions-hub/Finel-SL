/*! For license information please see 402.8dd6278d.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkrole_based_frontend=self.webpackChunkrole_based_frontend||[]).push([[402],{4919(e,s,t){t.d(s,{A:()=>a});const a=(0,t(5228).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},6402(e,s,t){t.r(s),t.d(s,{default:()=>x});var a=t(5043),l=t(1360);const n=(0,t(5228).A)("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);var r=t(7033),d=t(4919),i=t(579);const c=e=>{let{data:s,colors:t}=e;const a=s.reduce((e,s)=>e+s.value,0);let l=0;const n=s.map((e,s)=>{const n=e.value/a*360,r=l,d=l+n;l=d;const c=50+40*Math.cos(r*Math.PI/180),o=50+40*Math.sin(r*Math.PI/180),x=50+40*Math.cos(d*Math.PI/180),m=50+40*Math.sin(d*Math.PI/180),h=n>180?1:0;return(0,i.jsx)("path",{d:"M 50 50 L ".concat(c," ").concat(o," A 40 40 0 ").concat(h," 1 ").concat(x," ").concat(m," Z"),fill:t[s%t.length]},s)});return(0,i.jsx)("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:n})},o=e=>{let{data:s,colors:t}=e;const a=Math.max(...s.map(e=>e.value));s.length;return(0,i.jsxs)("svg",{viewBox:"0 0 400 200",className:"w-full h-full",children:[[0,.25,.5,.75,1].map((e,s)=>(0,i.jsx)("line",{x1:"30",y1:200-150*e-20,x2:"390",y2:200-150*e-20,stroke:"#e2e8f0",strokeWidth:"1"},"grid-".concat(s))),s.map((e,l)=>{const n=e.value/a*150,r=35+l*(360/s.length+5),d=200-n-20;return(0,i.jsxs)("g",{children:[(0,i.jsx)("rect",{x:r,y:d,width:360/s.length-5,height:n,fill:t[l%t.length],rx:"4"}),(0,i.jsx)("text",{x:r+(360/s.length-5)/2,y:"195",textAnchor:"middle",fontSize:"12",fill:"#64748b",children:e.value})]},l)})]})};function x(e){let{complaints:s=[],users:t=[],setModal:x,user:m}=e;const h=e=>{const s=e.filter(e=>e.resolvedAt&&e.createdAt);if(0===s.length)return 0;const t=s.reduce((e,s)=>e+(new Date(s.resolvedAt)-new Date(s.createdAt)),0);return Math.round(t/s.length/36e5)},u=(0,a.useMemo)(()=>{const e=s.reduce((e,s)=>{const t=s.status||"pending";return e[t]=(e[t]||0)+1,e},{}),a=s.reduce((e,s)=>{const t=s.priority||"medium";return e[t]=(e[t]||0)+1,e},{}),l=t.filter(e=>"engineer"===e.role).map(e=>{const t=s.filter(s=>s.assignedTo===String(e.id)&&("resolved"===s.status||"closed"===s.status)).length;return{name:e.name,resolved:t,id:e.id}}).sort((e,s)=>s.resolved-e.resolved).slice(0,8),n=Array.from({length:7},(e,t)=>{const a=6-t,l=new Date;l.setDate(l.getDate()-a);return{date:l.toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:s.filter(e=>{if(!e.resolvedAt)return!1;return new Date(e.resolvedAt).toLocaleDateString()===l.toLocaleDateString()&&("resolved"===e.status||"closed"===e.status)}).length}}),r=s.filter(e=>{if(!e.resolvedAt||!e.createdAt)return!1;return new Date(e.resolvedAt)-new Date(e.createdAt)<=864e5}).length;return{statusCounts:e,priorityCounts:a,engineerStats:l,dailyResolutions:n,slaCompliance:s.length>0?(r/s.length*100).toFixed(1):0,totalComplaints:s.length,avgResolutionTime:h(s)}},[s,t]),p={pending:"#f59e0b",assigned:"#3b82f6",in_progress:"#8b5cf6",resolved:"#10b981",closed:"#6b7280"},g={low:"#10b981",medium:"#3b82f6",high:"#f59e0b",critical:"#ef4444"},f=Object.entries(u.statusCounts).map(e=>{let[s,t]=e;return{name:s.charAt(0).toUpperCase()+s.slice(1),value:t,color:p[s]}}),b=Object.entries(u.priorityCounts).map(e=>{let[s,t]=e;return{name:s.charAt(0).toUpperCase()+s.slice(1),value:t,color:g[s]}});return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between pb-4 border-b border-neutral-200",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-bold text-neutral-900",children:"Analytics & Insights"}),(0,i.jsx)("p",{className:"text-sm text-neutral-600",children:"Real-time service metrics and performance tracking"})]}),"engineer"!==(null===m||void 0===m?void 0:m.role)&&(0,i.jsxs)("button",{onClick:()=>x("complaint"),className:"bg-indigo-600 text-white px-4 py-2 rounded-md text-xs font-medium flex items-center gap-2 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1 transition-colors shadow-sm",title:"Create New Ticket",children:[(0,i.jsx)(l.A,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"New Ticket"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg border border-neutral-200 p-4 shadow-sm",children:[(0,i.jsx)("p",{className:"text-xs font-bold text-neutral-600 uppercase mb-2",children:"Total Tickets"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-neutral-900",children:u.totalComplaints}),(0,i.jsx)("p",{className:"text-xs text-neutral-600 mt-2",children:"All time"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg border border-neutral-200 p-4 shadow-sm",children:[(0,i.jsx)("p",{className:"text-xs font-bold text-neutral-600 uppercase mb-2",children:"SLA Compliance"}),(0,i.jsxs)("p",{className:"text-3xl font-bold text-emerald-600",children:[u.slaCompliance,"%"]}),(0,i.jsx)("p",{className:"text-xs text-neutral-600 mt-2",children:"Within 24 hours"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg border border-neutral-200 p-4 shadow-sm",children:[(0,i.jsx)("p",{className:"text-xs font-bold text-neutral-600 uppercase mb-2",children:"Avg Resolution"}),(0,i.jsxs)("p",{className:"text-3xl font-bold text-neutral-900",children:[u.avgResolutionTime,"h"]}),(0,i.jsx)("p",{className:"text-xs text-neutral-600 mt-2",children:"Average hours"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg border border-neutral-200 p-4 shadow-sm",children:[(0,i.jsx)("p",{className:"text-xs font-bold text-neutral-600 uppercase mb-2",children:"Open Tickets"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-amber-600",children:(u.statusCounts.pending||0)+(u.statusCounts.assigned||0)+(u.statusCounts.in_progress||0)}),(0,i.jsx)("p",{className:"text-xs text-neutral-600 mt-2",children:"Awaiting resolution"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg border border-neutral-200 p-6 shadow-sm",children:[(0,i.jsxs)("h3",{className:"text-sm font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[(0,i.jsx)(n,{className:"w-4 h-4"}),"Ticket Status Distribution"]}),(0,i.jsxs)("div",{className:"flex items-center gap-6",children:[(0,i.jsx)("div",{className:"w-32 h-32",children:(0,i.jsx)(c,{data:f,colors:f.map(e=>e.color)})}),(0,i.jsx)("div",{className:"space-y-2 flex-1",children:f.map((e,s)=>(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,i.jsx)("span",{className:"text-neutral-800",children:e.name})]}),(0,i.jsx)("span",{className:"font-bold text-neutral-900",children:e.value})]},s))})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6 shadow-sm",children:[(0,i.jsxs)("h3",{className:"text-sm font-bold text-slate-900 mb-4 flex items-center gap-2",children:[(0,i.jsx)(r.A,{className:"w-4 h-4"}),"Priority Breakdown"]}),(0,i.jsx)("div",{className:"h-40",children:(0,i.jsx)(o,{data:b,colors:b.map(e=>e.color)})}),(0,i.jsx)("div",{className:"flex justify-center gap-4 mt-4 text-xs",children:b.map((e,s)=>(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"font-bold text-neutral-900",children:e.value}),(0,i.jsx)("div",{className:"text-neutral-600",children:e.name})]},s))})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg border border-neutral-200 p-6 shadow-sm",children:[(0,i.jsxs)("h3",{className:"text-sm font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[(0,i.jsx)(d.A,{className:"w-4 h-4"}),"Resolution Trend (Last 7 Days)"]}),(0,i.jsx)("div",{className:"h-40 flex items-end gap-2",children:u.dailyResolutions.map((e,s)=>(0,i.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-full bg-blue-600 rounded-t",style:{height:"".concat(Math.max(20*e.value,10),"px")}}),(0,i.jsx)("span",{className:"text-xs text-neutral-600 mt-2",children:e.value}),(0,i.jsx)("span",{className:"text-xs font-medium text-neutral-800",children:e.date})]},s))})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg border border-neutral-200 p-6 shadow-sm",children:[(0,i.jsx)("h3",{className:"text-sm font-bold text-neutral-900 mb-4",children:"Top Performing Engineers"}),(0,i.jsx)("div",{className:"space-y-2",children:u.engineerStats.map((e,s)=>(0,i.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsxs)("span",{className:"font-bold text-slate-400 text-sm",children:["#",s+1]}),(0,i.jsx)("span",{className:"font-medium text-slate-900",children:e.name})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"w-32 h-6 bg-slate-200 rounded overflow-hidden",children:(0,i.jsx)("div",{className:"h-full bg-emerald-600",style:{width:"".concat(e.resolved/Math.max(...u.engineerStats.map(e=>e.resolved),1)*100,"%")}})}),(0,i.jsx)("span",{className:"font-bold text-slate-900 text-sm min-w-10 text-right",children:e.resolved})]})]},e.id))})]})]})}}}]);
//# sourceMappingURL=402.8dd6278d.chunk.js.map