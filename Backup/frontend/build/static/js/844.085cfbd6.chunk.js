/*! For license information please see 844.085cfbd6.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkrole_based_frontend=self.webpackChunkrole_based_frontend||[]).push([[844],{2844(e,s,t){t.r(s),t.d(s,{default:()=>d});var a=t(5043),r=t(2054),l=t(4537),n=t(5088),i=t(5244),o=t(4459),c=t(579);function d(e){let{complaints:s=[],users:t=[]}=e;const d=(0,a.useMemo)(()=>{const e=[];return s.forEach(s=>{var t,a,l,c;s.createdAt&&e.push({type:"complaint_created",timestamp:s.createdAt,icon:i.A,color:"blue",user:"System",description:"Complaint #".concat(s.displayId||s.id," created"),details:null===(t=s.problem)||void 0===t?void 0:t.substring(0,80),severity:"info"});(s.assignedAt&&s.engineer&&e.push({type:"complaint_assigned",timestamp:s.assignedAt,icon:o.A,color:"purple",user:"System",description:"Assigned to ".concat(s.engineer.name),details:"Complaint #".concat(s.displayId||s.id),severity:"info"}),s.checkInTime&&"in_progress"===s.status)&&e.push({type:"work_started",timestamp:s.checkInTime,icon:n.A,color:"amber",user:(null===(a=s.engineer)||void 0===a?void 0:a.name)||"Engineer",description:"Started working on complaint",details:"Complaint #".concat(s.displayId||s.id),severity:"info"});!s.resolvedAt||"resolved"!==s.status&&"closed"!==s.status||e.push({type:"complaint_resolved",timestamp:s.resolvedAt,icon:r.A,color:"emerald",user:(null===(l=s.engineer)||void 0===l?void 0:l.name)||"Engineer",description:"Complaint resolved",details:"".concat((null===(c=s.solutionNotes)||void 0===c?void 0:c.substring(0,60))||"Service completed"),severity:"success"})}),e.sort((e,s)=>new Date(s.timestamp)-new Date(e.timestamp))},[s]),m=e=>{const s=new Date(e),t=new Date,a=t-s,r=Math.floor(a/6e4),l=Math.floor(a/36e5),n=Math.floor(a/864e5);return r<60?"".concat(r,"m ago"):l<24?"".concat(l,"h ago"):n<7?"".concat(n,"d ago"):s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:s.getFullYear()!==t.getFullYear()?"numeric":void 0})},p=(e,s)=>{const t={blue:"bg-blue-100 text-blue-700",purple:"bg-purple-100 text-purple-700",amber:"bg-amber-100 text-amber-700",emerald:"bg-emerald-100 text-emerald-700"},a={info:"border-l-4 border-slate-300",success:"border-l-4 border-emerald-300",warning:"border-l-4 border-amber-300",error:"border-l-4 border-rose-300"};return"".concat(t[e]||t.blue," ").concat(a[s]||a.info)};return(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between pb-4 border-b border-slate-200",children:[(0,c.jsxs)("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-2",children:[(0,c.jsx)(l.A,{className:"w-5 h-5"}),"Activity Timeline"]}),(0,c.jsxs)("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-full font-medium",children:[d.length," events"]})]}),(0,c.jsx)("div",{className:"space-y-3",children:d.length>0?d.slice(0,50).map((e,s)=>{const t=e.icon;return(0,c.jsx)("div",{className:"p-4 rounded-lg bg-white border ".concat(p(e.color,e.severity)," transition-all hover:shadow-sm"),children:(0,c.jsxs)("div",{className:"flex gap-3",children:[(0,c.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(0,c.jsx)("div",{className:"p-2 rounded-lg ".concat(p(e.color,e.severity)),children:(0,c.jsx)(t,{className:"w-4 h-4"})})}),(0,c.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,c.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:e.description}),e.details&&(0,c.jsx)("p",{className:"text-xs text-slate-600 mt-1",children:e.details})]}),(0,c.jsx)("span",{className:"text-xs text-slate-500 whitespace-nowrap",children:m(e.timestamp)})]}),(0,c.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,c.jsx)("span",{className:"text-xs font-medium text-slate-600 bg-slate-100 px-2 py-0.5 rounded",children:e.user}),(0,c.jsx)("span",{className:"text-xs text-slate-500 capitalize px-2 py-0.5 bg-slate-50 rounded",children:e.type.replace(/_/g," ")})]})]})]})},s)}):(0,c.jsxs)("div",{className:"p-8 text-center border border-dashed border-slate-200 rounded-lg",children:[(0,c.jsx)(l.A,{className:"w-12 h-12 mx-auto text-slate-300 mb-3"}),(0,c.jsx)("p",{className:"text-sm text-slate-500",children:"No activities recorded yet"})]})})]})}},4459(e,s,t){t.d(s,{A:()=>a});const a=(0,t(5228).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}}]);
//# sourceMappingURL=844.085cfbd6.chunk.js.map