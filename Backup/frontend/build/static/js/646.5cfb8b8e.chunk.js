/*! For license information please see 646.5cfb8b8e.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkrole_based_frontend=self.webpackChunkrole_based_frontend||[]).push([[646],{1646(e,s,t){t.r(s),t.d(s,{default:()=>h});t(5043);var l=t(7819);const n=(0,t(5228).A)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var a=t(6833),r=t(8280),d=t(1360),i=t(579);function c(e){let{label:s,value:t,Icon:l,color:n,bg:a}=e;return(0,i.jsx)("div",{className:"bg-white p-5 rounded-lg border border-neutral-200 shadow-sm hover:shadow-md transition-shadow",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-neutral-500 text-sm font-medium",children:s}),(0,i.jsx)("h4",{className:"text-3xl font-bold text-neutral-900 mt-2",children:t})]}),(0,i.jsx)("div",{className:"p-3 rounded-md ".concat(a," ").concat(n),children:(0,i.jsx)(l,{className:"w-6 h-6"})})]})})}var o=t(6327);function h(e){let{complaints:s,customers:t,machines:h,setCurrentView:x,setModal:m,user:u}=e;const p={new:s.filter(e=>"pending"===e.status).length,active:s.filter(e=>["assigned","in_progress"].includes(e.status)).length,resolved:s.filter(e=>["resolved","closed"].includes(e.status)).length,machines:h.length},v={pending:"New",assigned:"Assigned",in_progress:"In Progress",resolved:"Resolved",closed:"Closed"};return(0,i.jsxs)("div",{className:"fade-in space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,i.jsx)(c,{label:"Open Tickets",value:p.new,Icon:l.A,color:"text-error-600",bg:"bg-error-50"}),(0,i.jsx)(c,{label:"Active Service",value:p.active,Icon:n,color:"text-primary-600",bg:"bg-primary-50"}),(0,i.jsx)(c,{label:"Resolved (30d)",value:p.resolved,Icon:a.A,color:"text-success-600",bg:"bg-success-50"}),(0,i.jsx)(c,{label:"Fleet Size",value:p.machines,Icon:r.A,color:"text-secondary-600",bg:"bg-secondary-50"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg border border-neutral-200 shadow-sm overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-6 py-4 border-b border-neutral-200 flex justify-between items-center bg-neutral-50",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-neutral-900 text-sm",children:"Recent Activity"}),(0,i.jsxs)("p",{className:"text-xs text-neutral-600 mt-1",children:[s.length," active tickets"]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:["engineer"!==(null===u||void 0===u?void 0:u.role)&&(0,i.jsxs)("button",{onClick:()=>m("complaint"),className:"bg-indigo-600 text-white px-3 py-2 rounded-md text-xs font-medium flex items-center gap-2 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1 transition-colors shadow-sm",title:"Create New Ticket",children:[(0,i.jsx)(d.A,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"New"})]}),(0,i.jsx)("button",{onClick:()=>x("complaints"),className:"text-xs font-medium text-primary-600 hover:text-primary-700 transition-colors",children:"View All \u2192"})]})]}),(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,i.jsx)("thead",{className:"bg-neutral-50 text-neutral-700 text-xs font-semibold uppercase tracking-wider border-b border-neutral-200",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3",children:"Ticket ID"}),(0,i.jsx)("th",{className:"px-6 py-3",children:"Client"}),(0,i.jsx)("th",{className:"px-6 py-3",children:"Machine"}),(0,i.jsx)("th",{className:"px-6 py-3",children:"Status"})]})}),(0,i.jsxs)("tbody",{className:"divide-y divide-neutral-100",children:[s.slice(0,5).map(e=>{const s=t.find(s=>s.id===e.customerId),l=h.find(s=>s.id===e.machineId);return(0,i.jsxs)("tr",{className:"hover:bg-neutral-50 transition-colors",children:[(0,i.jsx)("td",{className:"px-6 py-4 font-mono text-xs text-primary-600 font-medium",children:e.displayId||e.complaintId||"#".concat(e.id)}),(0,i.jsxs)("td",{className:"px-6 py-4",children:[(0,i.jsx)("div",{className:"font-medium text-neutral-900",children:(null===s||void 0===s?void 0:s.company)||(null===s||void 0===s?void 0:s.name)||"Unknown"}),(0,i.jsx)("div",{className:"text-xs text-neutral-500 mt-0.5",children:(null===s||void 0===s?void 0:s.serviceNo)||"ID: ".concat(null===s||void 0===s?void 0:s.id)})]}),(0,i.jsxs)("td",{className:"px-6 py-4",children:[(0,i.jsx)("div",{className:"text-neutral-800 font-medium",children:(null===l||void 0===l?void 0:l.model)||"-"}),(0,i.jsx)("div",{className:"text-xs text-neutral-500 font-mono mt-0.5",children:(null===l||void 0===l?void 0:l.serialNumber)||"-"})]}),(0,i.jsx)("td",{className:"px-6 py-4",children:(0,i.jsx)(o.A,{status:v[e.status]||e.status})})]},e.id)}),0===s.length&&(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"4",className:"px-6 py-12 text-center text-neutral-400 italic",children:"No tickets found"})})]})]})})]})]})}},6327(e,s,t){t.d(s,{A:()=>a});t(5043);var l=t(8783),n=t(579);function a(e){let{status:s}=e;const t=l.M2[s]||{label:s,color:"bg-neutral-100 text-neutral-700 border border-neutral-200"};return(0,n.jsx)("span",{className:"px-2.5 py-1 rounded-md text-xs font-semibold uppercase tracking-wide border ".concat(t.color),children:t.label})}},6833(e,s,t){t.d(s,{A:()=>l});const l=(0,t(5228).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},8280(e,s,t){t.d(s,{A:()=>l});const l=(0,t(5228).A)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]])}}]);
//# sourceMappingURL=646.5cfb8b8e.chunk.js.map