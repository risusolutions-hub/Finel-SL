{"version":3,"file":"static/js/344.5688252d.chunk.js","mappings":"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","sources":["components/dashboard/modals/AssignEngineerModal.js","../node_modules/lucide-react/src/icons/loader-circle.ts","../node_modules/lucide-react/src/icons/star.ts"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { X, Check, Zap, Star, Award, Loader2 } from 'lucide-react';\r\nimport api from '../../../api';\r\n\r\nexport default function AssignEngineerModal({ complaint, engineers, onAssign, onClose }) {\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [loadingSuggestions, setLoadingSuggestions] = useState(false);\r\n  const [autoAssigning, setAutoAssigning] = useState(false);\r\n  const [showSuggestions, setShowSuggestions] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadSuggestions();\r\n  }, [complaint.id]);\r\n\r\n  const loadSuggestions = async () => {\r\n    try {\r\n      setLoadingSuggestions(true);\r\n      const res = await api.get(`/complaints/${complaint.id}/suggested-engineers`);\r\n      if (res.data.success) {\r\n        setSuggestions(res.data.suggestions || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading suggestions:', error);\r\n    } finally {\r\n      setLoadingSuggestions(false);\r\n    }\r\n  };\r\n\r\n  const handleAutoAssign = async () => {\r\n    try {\r\n      setAutoAssigning(true);\r\n      const res = await api.post(`/complaints/${complaint.id}/auto-assign`);\r\n      if (res.data.success) {\r\n        onClose();\r\n        window.location.reload(); // Refresh to show updated assignment\r\n      }\r\n    } catch (error) {\r\n      console.error('Error auto-assigning:', error);\r\n      alert(error.response?.data?.error || 'Failed to auto-assign');\r\n    } finally {\r\n      setAutoAssigning(false);\r\n    }\r\n  };\r\n\r\n  const getSuggestedEngineer = (engineerId) => {\r\n    return suggestions.find(s => s.id === parseInt(engineerId));\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-slate-900/60 flex z-50 items-center justify-center backdrop-blur-sm p-4\">\r\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-lg border border-slate-200\">\r\n        <div className=\"px-6 py-4 border-b border-slate-200 flex justify-between items-center bg-slate-50 rounded-t-lg\">\r\n          <div>\r\n            <h3 className=\"text-sm font-semibold text-slate-900\">Assign Engineer</h3>\r\n            <p className=\"text-xs text-slate-500 mt-0.5\">Ticket #{complaint.displayId || complaint.id}</p>\r\n          </div>\r\n          <button onClick={onClose} className=\"p-1 hover:bg-slate-200 rounded text-slate-400 hover:text-slate-600 transition-colors\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Auto-Assign Button */}\r\n        <div className=\"p-4 border-b border-slate-200 bg-gradient-to-r from-blue-50 to-purple-50\">\r\n          <button\r\n            onClick={handleAutoAssign}\r\n            disabled={autoAssigning}\r\n            className=\"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg px-4 py-3 font-medium flex items-center justify-center gap-2 hover:from-blue-700 hover:to-purple-700 transition disabled:opacity-50\"\r\n          >\r\n            {autoAssigning ? (\r\n              <>\r\n                <Loader2 size={18} className=\"animate-spin\" />\r\n                Finding Best Match...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Zap size={18} />\r\n                Auto-Assign Best Engineer\r\n              </>\r\n            )}\r\n          </button>\r\n          <p className=\"text-xs text-slate-500 text-center mt-2\">\r\n            Automatically assigns based on skills, availability, and experience\r\n          </p>\r\n        </div>\r\n\r\n        {/* Suggested Engineers */}\r\n        {showSuggestions && suggestions.length > 0 && (\r\n          <div className=\"p-4 border-b border-slate-200\">\r\n            <h4 className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 flex items-center gap-2\">\r\n              <Star size={12} className=\"text-yellow-500\" />\r\n              AI Suggestions\r\n            </h4>\r\n            <div className=\"space-y-2\">\r\n              {suggestions.slice(0, 3).map(s => (\r\n                <button\r\n                  key={s.id}\r\n                  onClick={() => onAssign(complaint.id, s.id)}\r\n                  className=\"w-full text-left p-3 rounded-md border border-yellow-200 bg-yellow-50 hover:border-yellow-300 hover:bg-yellow-100 transition-all\"\r\n                >\r\n                  <div className=\"flex items-start justify-between\">\r\n                    <div>\r\n                      <p className=\"font-medium text-sm text-slate-900 flex items-center gap-2\">\r\n                        {s.name}\r\n                        {s.matchingSkills?.length > 0 && (\r\n                          <span className=\"bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded-full\">\r\n                            {s.matchingSkills.length} skill match\r\n                          </span>\r\n                        )}\r\n                      </p>\r\n                      {s.matchingSkills?.length > 0 && (\r\n                        <div className=\"flex flex-wrap gap-1 mt-1\">\r\n                          {s.matchingSkills.map((skill, i) => (\r\n                            <span key={i} className=\"text-xs bg-white text-slate-600 px-2 py-0.5 rounded border border-slate-200\">\r\n                              {skill.name} ({skill.level})\r\n                            </span>\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <span className={`px-2 py-1 rounded text-xs font-medium ${\r\n                      s.isAvailable ? 'bg-green-100 text-green-700' : 'bg-amber-100 text-amber-700'\r\n                    }`}>\r\n                      {s.isAvailable ? 'Available' : 'Busy'}\r\n                    </span>\r\n                  </div>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"p-4 max-h-[40vh] overflow-y-auto\">\r\n          <h4 className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2\">All Engineers</h4>\r\n          <div className=\"space-y-2\">\r\n            {engineers.map(e => {\r\n              const suggestion = getSuggestedEngineer(e.id);\r\n              return (\r\n                <button\r\n                  key={e.id}\r\n                  onClick={() => onAssign(complaint.id, e.id)}\r\n                  className=\"w-full text-left p-3 rounded-md border border-slate-200 hover:border-blue-300 hover:bg-blue-50 transition-all flex justify-between items-center group\"\r\n                >\r\n                  <div>\r\n                    <p className=\"font-medium text-sm text-slate-900 group-hover:text-blue-700 flex items-center gap-2\">\r\n                      {e.name}\r\n                      {suggestion?.matchingSkills?.length > 0 && (\r\n                        <Award size={14} className=\"text-yellow-500\" />\r\n                      )}\r\n                    </p>\r\n                    <p className=\"text-xs text-slate-500\">{e.location || 'Unknown Location'} â€¢ Rating: {e.rating || 'N/A'}</p>\r\n                  </div>\r\n                  <div className={`px-2 py-1 rounded text-xs font-medium border ${(e.status || 'Available') === 'Available' ? 'bg-emerald-50 text-emerald-700 border-emerald-100' : 'bg-amber-50 text-amber-700 border-amber-100'}`}>\r\n                     {e.status || 'Available'}\r\n                  </div>\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"px-6 py-4 border-t border-slate-100 bg-slate-50/50 rounded-b-lg text-right\">\r\n             <span className=\"text-xs text-slate-400\">Select an engineer to immediately assign</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'M21 12a9 9 0 1 1-6.219-8.56', key: '13zald' }]];\n\n/**\n * @component @name LoaderCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTYuMjE5LTguNTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/loader-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LoaderCircle = createLucideIcon('loader-circle', __iconNode);\n\nexport default LoaderCircle;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z',\n      key: 'r04s7s',\n    },\n  ],\n];\n\n/**\n * @component @name Star\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTEuNTI1IDIuMjk1YS41My41MyAwIDAgMSAuOTUgMGwyLjMxIDQuNjc5YTIuMTIzIDIuMTIzIDAgMCAwIDEuNTk1IDEuMTZsNS4xNjYuNzU2YS41My41MyAwIDAgMSAuMjk0LjkwNGwtMy43MzYgMy42MzhhMi4xMjMgMi4xMjMgMCAwIDAtLjYxMSAxLjg3OGwuODgyIDUuMTRhLjUzLjUzIDAgMCAxLS43NzEuNTZsLTQuNjE4LTIuNDI4YTIuMTIyIDIuMTIyIDAgMCAwLTEuOTczIDBMNi4zOTYgMjEuMDFhLjUzLjUzIDAgMCAxLS43Ny0uNTZsLjg4MS01LjEzOWEyLjEyMiAyLjEyMiAwIDAgMC0uNjExLTEuODc5TDIuMTYgOS43OTVhLjUzLjUzIDAgMCAxIC4yOTQtLjkwNmw1LjE2NS0uNzU1YTIuMTIyIDIuMTIyIDAgMCAwIDEuNTk3LTEuMTZ6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/star\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Star = createLucideIcon('star', __iconNode);\n\nexport default Star;\n"],"names":["AssignEngineerModal","_ref","complaint","engineers","onAssign","onClose","suggestions","setSuggestions","useState","loadingSuggestions","setLoadingSuggestions","autoAssigning","setAutoAssigning","showSuggestions","setShowSuggestions","useEffect","loadSuggestions","id","async","res","api","get","concat","data","success","error","console","_jsx","className","children","_jsxs","displayId","onClick","X","post","window","location","reload","_error$response","_error$response$data","alert","response","disabled","_Fragment","Loader2","size","Zap","length","Star","slice","map","s","_s$matchingSkills","_s$matchingSkills2","name","matchingSkills","skill","i","level","isAvailable","e","_suggestion$matchingS","suggestion","engineerId","find","parseInt","Award","rating","status","LoaderCircle","createLucideIcon","d","key"],"ignoreList":[],"sourceRoot":""}